# ğŸ“šstructure

```lua
universe
â”œâ”€â”€ ans -- æš‚å­˜ç®±
     â””â”€â”€ annotation -- æ ¡éªŒæ³¨è§£
â”œâ”€â”€ fuctions -- åŠŸèƒ½å®ç°æ¨¡å—
     â”œâ”€â”€ async -- å¼‚æ­¥æ‰§è¡Œ
     â”œâ”€â”€ autoCode-Redis -- éªŒè¯ç 
     â”œâ”€â”€ cache -- æ–¹æ³•ç»“æœç¼“å­˜
     â”œâ”€â”€ custom-exception -- è‡ªå®šä¹‰å¼‚å¸¸
     â”œâ”€â”€ JWT -- è®¤è¯æˆæƒ
     â”œâ”€â”€ order-task -- å®šæ—¶ä»»åŠ¡
     â”œâ”€â”€ repeated-submit-intercept -- é˜²é‡å¤æäº¤è§£å†³æ–¹æ¡ˆ
     â”œâ”€â”€ returnR -- ç»Ÿä¸€ç»“æœé›†
     â”œâ”€â”€ seckill -- ç§’æ€ç³»ç»Ÿè®¾è®¡
     â””â”€â”€ trigger-log -- æ—¥å¿—è§¦å‘
â”œâ”€â”€ galaxy -- æŠ€æœ¯é“¶æ²³
     â”œâ”€â”€ automic
     â”œâ”€â”€ beanMapping -- beanæ˜ å°„
     â”œâ”€â”€ callback -- å›è°ƒå‡½æ•°
     â”œâ”€â”€ download
     â”œâ”€â”€ empty
     â”œâ”€â”€ format
     â”œâ”€â”€ interesting
     â”œâ”€â”€ ip
     â”œâ”€â”€ log -- æ—¥å¿—
     â”œâ”€â”€ oom -- å†…å­˜æº¢å‡º
     â”œâ”€â”€ optional
     â”œâ”€â”€ stream
     â”œâ”€â”€ stringJoiner
     â”œâ”€â”€ system
     â”œâ”€â”€ threadLocal
     â””â”€â”€ time
â”œâ”€â”€ middleware -- å¼€æºä¸­é—´ä»¶ä½¿ç”¨
     â”œâ”€â”€ Dubbo
     â”œâ”€â”€ Elasticsearch
     â”œâ”€â”€ Gateway -- ç½‘å…³
     â”œâ”€â”€ Kafka
     â”œâ”€â”€ Knife4j
     â”œâ”€â”€ monitor -- ç›‘è§†å™¨
     â”œâ”€â”€ MybatisPlus -- use of CRUD
     â”œâ”€â”€ RabbitMQ
     â”œâ”€â”€ Redission -- åˆ†å¸ƒå¼é”
     â”œâ”€â”€ RocketMQ
     â”œâ”€â”€ ShardingSphere -- è¯»å†™åˆ†ç¦»ï¼Œå•åº“åˆ†è¡¨
     â””â”€â”€ xxl-job -- åˆ†å¸ƒå¼ä»»åŠ¡
â”œâ”€â”€ scalabilty -- å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§
     â”œâ”€â”€ arguments -- æ–¹æ³•å‚æ•°ä¸ªæ•°
     â”œâ”€â”€ call-back -- å›è°ƒå‡½æ•°
     â”œâ”€â”€ controller
     â”œâ”€â”€ entity -- å®ä½“ç±»å…¬æœ‰è´¢äº§
     â”œâ”€â”€ interface -- æ¥å£è¿ç”¨
     â””â”€â”€ resultcode
â””â”€â”€ z-others -- å…¶ä»–
     â”œâ”€â”€ template -- æ¨¡å—ä»“åº“
     â”œâ”€â”€ util
     â””â”€â”€ z-dp -- SQL
```





# ğŸ“–Introduce

## 1.fuctions

### repeat-submit-intercept

> é‡å¤æäº¤ï¼ŒæŒ‡çš„æ˜¯æœ¬æ¬¡urlæ–¹æ³•**æœªæ‰§è¡Œå®Œæˆ**ï¼Œå¯¹å£è¯¥urlæ–¹æ³•æäº¤é‡å¤çš„æ•°æ®

**process**

- æ¯æ¬¡æäº¤ï¼Œè·å–**Redisåˆ†å¸ƒå¼é”**

  - è‹¥è·å–é”æˆåŠŸï¼Œåˆ™æ‰§è¡Œæäº¤

    å**è§£é™¤**è¯¥é”ï¼Œå¯è¿›è¡Œ**ä¸‹æ¬¡æäº¤**

  - è‹¥è·å–é”å¤±è´¥ï¼Œåˆ™è¡¨ç¤ºæœ¬æ¬¡æäº¤**æ­£åœ¨è¿›è¡Œä¸­**ï¼Œé˜²æ­¢äº†é‡å¤æäº¤

    **æœ¬æ¬¡**æäº¤åï¼Œæ‰å¯ä»¥è¿›è¡Œ**ä¸‹ä¸€æ¬¡**æäº¤

**knowledge**

- getServletPath()è·å–çš„æ˜¯**è®¿é—®**çš„urlè·¯å¾„

- è‹¥å¤šä¸ªæµè§ˆå™¨**çª—å£**æ‰§è¡Œ**ç›¸åŒ**urlï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç­‰å¾…ç¬¬ä¸€ä¸ªçª—å£urlè¯·æ±‚åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªçª—å£çš„ç›¸åŒurl

  æ•…å‡ºç°ï¼Œå¤šä¸ªçª—å£æµ‹è¯•æœ¬moduleï¼Œ**ä¸ä¼šå‡ºç°**é‡å¤æäº¤æŠ¥è­¦

### trigger-log

**how**

- åˆ›å»ºåˆ‡é¢ï¼Œå…¶ä¸­è¿æ¥ç‚¹ä¸ºæ·»åŠ @Logæ³¨è§£çš„æ‰€æœ‰æ–¹æ³•ï¼ŒAOPé€šçŸ¥çš„é€»è¾‘ä¸ºæ“ä½œæ•°æ®åº“

### async

> asynchronouså¼‚æ­¥çš„[eÉªËˆsÉªÅ‹krÉ™nÉ™s]

**process**

- ä½¿ç”¨@Asyncå¯ä»¥ä½¿ç”¨æ–¹æ³•çº¿ç¨‹ä¸ç¨‹åºä¸»çº¿ç¨‹ï¼Œ**å¼‚æ­¥æ‰§è¡Œ**

  ä¸»çº¿ç¨‹ä¸ç”¨**ç­‰**è¯¥æ–¹æ³•æ‰§è¡Œå®Œå†æ‰§è¡Œæ–¹æ³•ä¸‹çš„é€»è¾‘

### autoCode-Redis

**how**

- forå¾ªç¯è”åˆRandomç”ŸæˆéªŒè¯ç ï¼Œä¿å­˜åœ¨Redisé‡Œ

**bugs**

- ```
  java.lang.NullPointerException: nullç©ºæŒ‡é’ˆå¼‚å¸¸
  ```

  slovedï¼šprivate RedisService redisSeriviceæ²¡æœ‰æ·»åŠ @Resource

  å®šä½åº”è¯¥æ˜¯å¯¹è±¡ï¼Œå´æµ‹è¯•å˜é‡ï¼Œå˜é‡ä¸å¯èƒ½ç©ºæŒ‡é’ˆå¼‚å¸¸







## 2.galaxy

### automic

- Automicå®¶æ—ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®çš„åŸå­æ€§ï¼Œç›¸æ¯”synchronizedæ›´åŠ è½»é‡çº§ï¼Œè¯¥ç±»æ“ä½œçš„æ˜¯å¼•ç”¨ç±»å‹

### optional

- JDK8ä¸ºäº†è§£å†³**NPE**é—®é¢˜ï¼Œå‚è€ƒGoogleç±»åº“ä¸­çš„Optionalç±»è®¾è®¡æ‰€åˆ›å»ºçš„å·¥å…·ç±»

### stringJoiner

- åˆ›é€ ä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå¯æ·»åŠ å‰ç¼€ã€åç¼€ã€åˆ†éš”ç¬¦



### cache

**process**

- @Cacheableå¯**ç¼“å­˜æŸæ–¹æ³•**çš„æ‰§è¡Œç»“æœï¼Œåªè¦ç¬¬äºŒæ¬¡è®¿é—®æ–¹æ³•æ‰€å¸¦çš„å‚æ•°ä¸ç¬¬ä¸€æ¬¡**ä¸€è‡´**ï¼Œåˆ™ç›´æ¥è¿”å›ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ç»“æœ

  å¯åº”ç”¨äºæ€§èƒ½æé«˜



### custom-exception

**how**

- åˆ›å»ºAssertç±»æŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ä¼ é€’Stringå‚æ•°ç»™Assert
- è‡ªå®šä¹‰å¼‚å¸¸ç±»ç»§æ‰¿RuntimeExceptionï¼Œsuper()ä¼ é€’å¼‚å¸¸ç»™RuntimeException
- æˆ–è€…ä¼ é€’IErrorCodeå¯¹è±¡ç»™Assert









## 3.M-S

> scalabilityå¯æ‰©å±•æ€§[ËŒskeÉªlÉ™ËˆbÉªlÉ™ti]ã€maintainabilityå¯ç»´æŠ¤æ€§[meÉªnËŒteÉªnÉ™ËˆbÉªlÉ™ti]

### call-back

- é€šè¿‡å›è°ƒå‡½æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªæ–¹æ³•å°±å¯
  - è°ƒç”¨nä¸ªç±»çš„ç›¸åŒæ–¹æ³•ï¼Œä¸”é¡ºä¾¿å¤„ç†æ¯ä¸€ä¸ªå±äºä¸åŒå®ä¾‹çš„Listèµ„æº
- ä¸é€šè¿‡å›è°ƒå‡½æ•°ï¼Œéœ€ä½¿ç”¨ä¸¤ä¸ªæ–¹æ³•
  - 1.å¤§é‡é‡å¤ä¹¦å†™ç›¸åŒæ–¹æ³•å
  - 2.åˆ›å»ºå¦ä¸€ä¸ªæ–¹æ³•æ¥å•ç‹¬å¤„ç†æ¯ä¸€ä¸ªListèµ„æº

### interface

- è¦æ‰§è¡Œ**æŸä¸€åˆ†ç±»çš„æ‰€æœ‰æ–¹æ³•**

  å¯ä½¿ç”¨æ¥å£ï¼Œç»Ÿä¸€æ‰§è¡Œè¯¥æ¥å£çš„**æ‰€æœ‰å®ä¾‹**å³å¯









## 4.middleware

### Dubbo

**process**

- è¢«è°ƒç”¨æœåŠ¡å’Œè°ƒç”¨è€…æœåŠ¡éƒ½æ³¨å†Œåˆ°Nacosï¼Œè°ƒç”¨è€…ä½¿ç”¨Dubboä»Nacosè·å–æœåŠ¡å¹¶è°ƒç”¨
- è°ƒç”¨è¿œç¨‹çš„å¯¹è±¡æ–¹æ³•ï¼Œåƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·çš„ç®€å•

**bugs**

- paskage -> package

- è¿œç¨‹æ¥å£ç±»å’Œè¿œç¨‹å®ç°ç±»çš„æ‰€åœ¨çš„åŒ…å**å¿…é¡»ç›¸åŒ**

  ```yaml
  scan:
    base-packages: com.codeman.dubbo
  ```

  





### Gateway

**process**

- å®¢æˆ·ç«¯æœåŠ¡åœ¨Nacosè¿›è¡Œæ³¨å†Œï¼Œç½‘å…³ä»Nacosè·å–å®¢æˆ·ç«¯æœåŠ¡

  ç”¨æˆ·è®¿é—®ç½‘å…³ï¼Œå³å¯è®¿é—®å®¢æˆ·ç«¯æœåŠ¡

**knowledge**

- bootstrap.ymlä½¿ç”¨äºSpring Cloudçš„åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œapplication.ymlä½¿ç”¨äºSpring Bootçš„åº”ç”¨ä¸Šä¸‹æ–‡

  bootstrap.ymlå…ˆäºapplication.ymlåŠ è½½



### JWT







### monitor

> [ËˆmÉ’nÉªtÉ™(r)]ç›‘æ§å™¨

**bugs**

- localhoct -> localhost



### order-task

**how**

- åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤
- æŸ¥è¯¢å‡ºè®¢å•è¶…æ—¶æ—¶é—´
- æ ¹æ®è®¢å•è¶…æ—¶æ—¶é—´ï¼ŒæŸ¥è¯¢å‡ºæ‰€æœ‰è¶…æ—¶è®¢å•
- æ ¹æ®è¶…æ—¶è®¢å•ï¼Œä¿®æ”¹è®¢å•çŠ¶æ€ä¸ºå…³é—­ï¼Œè€Œä¸æ˜¯åˆ é™¤è®¢å•æ•°æ®
- æ ¹æ®è¶…æ—¶è®¢å•ï¼Œä¿®æ”¹è®¢å•å¯¹åº”å•†å“çš„é”å®šåº“å­˜





### Redisson

**process**

- server-twoæ²¡æœ‰ä¼‘çœ åˆ™è¾“å‡ºã€server-oneä¼‘çœ 16sæ‰è¾“å‡º

  è€Œserver-oneç‡å…ˆè·å¾—é”ï¼Œæ•…server-twoè¦ç­‰16sï¼Œåœ¨server-oneè¾“å‡ºåæ‰è¾“å‡º



**WHY**

- å¯¹æ¯æ¬¡urlè°ƒç”¨è¿”å›çš„ç»“æœåšç»Ÿä¸€å¤„ç†ï¼Œè¿”å›çš„Rå¯¹è±¡å¯ä»¥**æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š**ï¼Œèµ·åˆ°ç»™å‰ç«¯é¡µé¢æç¤ºçš„ä½œç”¨

> é¡µé¢æ¥æ”¶åˆ°çš„ä¸ºï¼š{"code":1,"data":{"id":1,"name":"Jone","age":18,"email":"test1@baomidou.com"},"message":"success"}

**how**

**è¿”å›Rå¯¹è±¡**return R.ok(userService.getId());

R.okæ–¹æ³•æŠŠæ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®ã€æˆè´¥ä¿¡æ¯æ•´å‹è¡¨ç¤ºã€æˆè´¥ä¿¡æ¯å­—ç¬¦ä¸²å°è£…æˆRå¯¹è±¡ï¼Œè¿”å›ç»™å‰ç«¯

```
public static <T> R<T> ok(T data) { // Rçš„ä¸¤ä¸ªä½ç½®æ³›å‹ï¼Œç¡®ä¿äº†è¿”å›çš„Rå¯¹è±¡çš„æ³›å‹ä¹Ÿæ˜¯è¯¥æ³›å‹
    return restResult(CommonConstant.SUCCESS, data, "success");
}
```

**æˆè´¥ä¿¡æ¯ç±»**çš„ç±»å‹

- æˆè´¥ä¿¡æ¯ç±»ä¸ºæ¥å£ç±»å‹ï¼Œå› ä¸ºæ¥å£çš„å˜é‡ç±»å‹é»˜è®¤ä¸ºpublic static finalï¼Œä»£è¡¨è¯¥å˜é‡ä¸å¯å˜ä¸”å¯è®¿é—®

      public interface CommonConstant { //[ËˆkÉ’nstÉ™nt]å¸¸é‡
      
          Integer SUCCESS = 1;
      
          Integer FAIL = 0;
      }

- æˆè´¥ä¿¡æ¯ç±»ä¸ºEnumç±»å‹

  ```
  public enum ResultCode {
      SUCCESS(1, "successful"),
      FAIL(0, "fail");
  
      private final long code;
      private final String message;
  
      ResultCode (long code, String message) {
          this.code = code;
          this.message = message;
      }
  
      public long getCode() {
          return this.code;
      }
  
      public String getMessage() {
          return this.message;
      }
  }
  ```



### ShardingSphere

**process**

- é‡‡ç”¨**å•åº“åˆ†è¡¨** + ä¸»ä»å¤åˆ¶

  å•åº“åˆ†è¡¨è¿›è¡Œ**å†™**æ“ä½œï¼Œå…¶ä»–åº“è¿›è¡Œè¯»æ“ä½œ

  ä¹‹æ‰€ä»¥å•åº“å†™ï¼Œæ˜¯å› ä¸ºåˆ†åº“å†™çš„åœºæ™¯**ä¸å¤šè§**

- ä¸»ä»å¤åˆ¶äº¤ç»™**MySQLè‡ªå·±è¿›è¡Œ**

  åœ¨MySQLåˆ›å»ºå¤šä¸ªä¸åŒç«¯å£çš„æœåŠ¡å™¨

**knowledge**

- é…ç½®**åˆ†ç‰‡ç­–ç•¥**ï¼Œæ˜¯æŠŠæ•°æ®åˆ†é…åˆ°å¤šä¸ªè¡¨ä¸­



### xxl-job

**process**

- åœ¨xxl-jobä»»åŠ¡è°ƒåº¦ä¸­å¿ƒç•Œé¢ï¼Œæ·»åŠ æŸä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡çš„**æ ‡è¯†ç¬¦**ä¸Controllå±‚çš„@JobHandler("")**å¯¹åº”**

  ç•Œé¢ä¸Šçš„ç‚¹å‡»æ‰§è¡Œï¼Œåˆ™è°ƒç”¨åå°çš„ä»£ç è¿è¡Œ

**knowledge**

- ç³»ç»Ÿå¯åŠ¨éœ€è¦**æ­å»º**xxl-jobä»»åŠ¡è°ƒåº¦ä¸­å¿ƒ



